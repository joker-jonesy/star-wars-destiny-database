{"ast":null,"code":"import _slicedToArray from\"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';function CardInfo(props){var _React$useState=React.useState([{format:\"trilogy\",restricted:false,balance:\"--\",legal:false},{format:\"standard\",restricted:false,balance:\"--\",legal:false},{format:\"infinite\",restricted:false,balance:\"--\",legal:true}]),_React$useState2=_slicedToArray(_React$useState,2),rst=_React$useState2[0],setRst=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),load=_React$useState4[0],setLoad=_React$useState4[1];var subtypes;var sides;if(props.crd.subtypes!==undefined){subtypes=props.crd.subtypes.map(function(sb,idx){return React.createElement(\"h3\",{key:idx},sb.name,idx!==props.crd.subtypes.length-1&&\"-\");});}if(props.crd.sides!==undefined){sides=props.crd.sides.map(function(sd,idx){return React.createElement(\"div\",{key:idx,className:\"side\"},sd);});}React.useEffect(function(){var abortController=new AbortController();var signal=abortController.signal;function handleStatusChange(status){setRst(status);}var unsubscribe=function unsubscribe(){fetch(\"https://swdestinydb.com/api/public/formats/\",{signal:signal}).then(function(response){return response.json();}).then(function(data){var formats=[];data.map(function(fm){var format={name:fm.name,restricted:false,balance:\"--\",legal:false};if(props.code in fm.data.balance){format.balance=fm.data.balance[props.code];}if(fm.data.restricted.includes(props.code)){format.restricted=true;}if(fm.data.sets.includes(props.crd.set_code)){format.legal=true;}formats.push(format);});handleStatusChange(formats);}).catch(function(){return console.log();});};unsubscribe();return function cleanup(){unsubscribe();abortController.abort();};},[]);var formats=rst.map(function(fm,idx){return React.createElement(\"div\",{key:idx},React.createElement(\"h1\",null,fm.name),React.createElement(\"h3\",null,fm.restricted?\"Restricted\":null),React.createElement(\"h3\",null,fm.balance),React.createElement(\"h6\",null,\"Legal: \",fm.legal?\"Playable\":\"Unplayable\"));});return React.createElement(\"div\",{className:\"cardInfo\"},React.createElement(\"h1\",null,props.crd.is_unique&&\"◆ \",props.crd.name),React.createElement(\"h2\",null,props.crd.health&&\"Health:\",props.crd.health),React.createElement(\"h2\",null,props.crd.cost&&\"Cost:\",props.crd.cost),React.createElement(\"h2\",null,props.crd.points&&\"Points:\",props.crd.points),React.createElement(\"h2\",null,props.crd.type_name),React.createElement(\"div\",{className:\"subtypes\"},subtypes),React.createElement(\"div\",{className:\"sides\"},sides),React.createElement(\"h3\",null,props.crd.has_errata&&\"This card has an errata\"),formats,React.createElement(\"p\",null,props.crd.text),React.createElement(\"i\",null,props.crd.flavor),React.createElement(\"div\",null,props.crd.affiliation_name),React.createElement(\"div\",null,props.crd.rarity_name),React.createElement(\"div\",null,props.crd.set_name,\": \",props.crd.position));}export default CardInfo;","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardInfo.js"],"names":["React","CardInfo","props","useState","format","restricted","balance","legal","rst","setRst","load","setLoad","subtypes","sides","crd","undefined","map","sb","idx","name","length","sd","useEffect","abortController","AbortController","signal","handleStatusChange","status","unsubscribe","fetch","then","response","json","data","formats","fm","code","includes","sets","set_code","push","catch","console","log","cleanup","abort","is_unique","health","cost","points","type_name","has_errata","text","flavor","affiliation_name","rarity_name","set_name","position"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAwB,qBAEEF,KAAK,CAACG,QAAN,CAAe,CAElC,CACIC,MAAM,CAAC,SADX,CAEIC,UAAU,CAAC,KAFf,CAGKC,OAAO,CAAC,IAHb,CAIKC,KAAK,CAAC,KAJX,CAFkC,CAQjC,CACIH,MAAM,CAAC,UADX,CAEIC,UAAU,CAAC,KAFf,CAGIC,OAAO,CAAC,IAHZ,CAIIC,KAAK,CAAC,KAJV,CARiC,CAcjC,CACIH,MAAM,CAAC,UADX,CAEIC,UAAU,CAAC,KAFf,CAGIC,OAAO,CAAC,IAHZ,CAIIC,KAAK,CAAC,IAJV,CAdiC,CAAf,CAFF,oDAEbC,GAFa,qBAERC,MAFQ,0CAuBGT,KAAK,CAACG,QAAN,CAAe,KAAf,CAvBH,qDAuBbO,IAvBa,qBAuBPC,OAvBO,qBA0BpB,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,KAAJ,CAEA,GAAGX,KAAK,CAACY,GAAN,CAAUF,QAAV,GAAqBG,SAAxB,CAAkC,CAC/BH,QAAQ,CAAEV,KAAK,CAACY,GAAN,CAAUF,QAAV,CAAmBI,GAAnB,CAAuB,SAACC,EAAD,CAAKC,GAAL,QAC7B,2BAAI,GAAG,CAAEA,GAAT,EAAeD,EAAE,CAACE,IAAlB,CAAwBD,GAAG,GAAIhB,KAAK,CAACY,GAAN,CAAUF,QAAV,CAAmBQ,MAAnB,CAA0B,CAAjC,EAAqC,GAA7D,CAD6B,EAAvB,CAAV,CAGF,CAED,GAAGlB,KAAK,CAACY,GAAN,CAAUD,KAAV,GAAkBE,SAArB,CAA+B,CAC3BF,KAAK,CAAGX,KAAK,CAACY,GAAN,CAAUD,KAAV,CAAgBG,GAAhB,CAAoB,SAACK,EAAD,CAAKH,GAAL,QACxB,4BAAK,GAAG,CAAEA,GAAV,CAAe,SAAS,CAAE,MAA1B,EAAmCG,EAAnC,CADwB,EAApB,CAAR,CAGH,CAEDrB,KAAK,CAACsB,SAAN,CAAgB,UAAI,CAEhB,GAAMC,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CACA,GAAMC,CAAAA,MAAM,CAAGF,eAAe,CAACE,MAA/B,CAGA,QAASC,CAAAA,kBAAT,CAA4BC,MAA5B,CAAoC,CAChClB,MAAM,CAACkB,MAAD,CAAN,CACH,CAED,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAI,CAEpBC,KAAK,CAAC,6CAAD,CAAgD,CAACJ,MAAM,CAACA,MAAR,CAAhD,CAAL,CACKK,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAHL,EAIKF,IAJL,CAIU,SAACG,IAAD,CAAU,CACZ,GAAIC,CAAAA,OAAO,CAAC,EAAZ,CAECD,IAAI,CAACjB,GAAL,CAAS,SAACmB,EAAD,CAAM,CAEZ,GAAI/B,CAAAA,MAAM,CAAE,CACRe,IAAI,CAACgB,EAAE,CAAChB,IADA,CAERd,UAAU,CAAC,KAFH,CAGRC,OAAO,CAAC,IAHA,CAIRC,KAAK,CAAC,KAJE,CAAZ,CAOA,GAAGL,KAAK,CAACkC,IAAN,GAAcD,CAAAA,EAAE,CAACF,IAAH,CAAQ3B,OAAzB,CAAiC,CAC7BF,MAAM,CAACE,OAAP,CAAiB6B,EAAE,CAACF,IAAH,CAAQ3B,OAAR,CAAgBJ,KAAK,CAACkC,IAAtB,CAAjB,CACH,CAED,GAAGD,EAAE,CAACF,IAAH,CAAQ5B,UAAR,CAAmBgC,QAAnB,CAA4BnC,KAAK,CAACkC,IAAlC,CAAH,CAA2C,CACvChC,MAAM,CAACC,UAAP,CAAkB,IAAlB,CACH,CAED,GAAG8B,EAAE,CAACF,IAAH,CAAQK,IAAR,CAAaD,QAAb,CAAsBnC,KAAK,CAACY,GAAN,CAAUyB,QAAhC,CAAH,CAA6C,CACzCnC,MAAM,CAACG,KAAP,CAAa,IAAb,CACH,CAGD2B,OAAO,CAACM,IAAR,CAAapC,MAAb,EAIH,CA1BA,EA4BDsB,kBAAkB,CAACQ,OAAD,CAAlB,CACH,CApCL,EAoCOO,KApCP,CAoCa,iBAAKC,CAAAA,OAAO,CAACC,GAAR,EAAL,EApCb,EAqCH,CAvCD,CAyCAf,WAAW,GAGX,MAAO,SAASgB,CAAAA,OAAT,EAAkB,CACrBhB,WAAW,GACXL,eAAe,CAACsB,KAAhB,GACH,CAHD,CAIH,CA1DD,CA0DE,EA1DF,EA4DA,GAAIX,CAAAA,OAAO,CAAG1B,GAAG,CAACQ,GAAJ,CAAQ,SAACmB,EAAD,CAAKjB,GAAL,QACtB,4BAAK,GAAG,CAAEA,GAAV,EACI,8BAAKiB,EAAE,CAAChB,IAAR,CADJ,CAEI,8BAAKgB,EAAE,CAAC9B,UAAH,CAAgB,YAAhB,CAA6B,IAAlC,CAFJ,CAGI,8BAAK8B,EAAE,CAAC7B,OAAR,CAHJ,CAII,wCAAY6B,EAAE,CAAC5B,KAAH,CAAW,UAAX,CAAsB,YAAlC,CAJJ,CADsB,EAAR,CAAd,CAUA,MACI,4BAAK,SAAS,CAAE,UAAhB,EACI,8BAAKL,KAAK,CAACY,GAAN,CAAUgC,SAAV,EAAqB,IAA1B,CAAgC5C,KAAK,CAACY,GAAN,CAAUK,IAA1C,CADJ,CAEI,8BAAKjB,KAAK,CAACY,GAAN,CAAUiC,MAAV,EAAmB,SAAxB,CAAmC7C,KAAK,CAACY,GAAN,CAAUiC,MAA7C,CAFJ,CAGI,8BAAK7C,KAAK,CAACY,GAAN,CAAUkC,IAAV,EAAiB,OAAtB,CAA+B9C,KAAK,CAACY,GAAN,CAAUkC,IAAzC,CAHJ,CAII,8BAAK9C,KAAK,CAACY,GAAN,CAAUmC,MAAV,EAAmB,SAAxB,CAAmC/C,KAAK,CAACY,GAAN,CAAUmC,MAA7C,CAJJ,CAKI,8BAAK/C,KAAK,CAACY,GAAN,CAAUoC,SAAf,CALJ,CAMI,2BAAK,SAAS,CAAE,UAAhB,EAA6BtC,QAA7B,CANJ,CAOI,2BAAK,SAAS,CAAE,OAAhB,EAA0BC,KAA1B,CAPJ,CAQI,8BAAKX,KAAK,CAACY,GAAN,CAAUqC,UAAV,EAAsB,yBAA3B,CARJ,CASKjB,OATL,CAUI,6BAAIhC,KAAK,CAACY,GAAN,CAAUsC,IAAd,CAVJ,CAYI,6BAAIlD,KAAK,CAACY,GAAN,CAAUuC,MAAd,CAZJ,CAcI,+BAAMnD,KAAK,CAACY,GAAN,CAAUwC,gBAAhB,CAdJ,CAeI,+BAAMpD,KAAK,CAACY,GAAN,CAAUyC,WAAhB,CAfJ,CAiBI,+BAAMrD,KAAK,CAACY,GAAN,CAAU0C,QAAhB,MAA4BtD,KAAK,CAACY,GAAN,CAAU2C,QAAtC,CAjBJ,CADJ,CAuBH,CAED,cAAexD,CAAAA,QAAf","sourcesContent":["import React from 'react';\n\nfunction CardInfo(props){\n\n    const [rst, setRst] = React.useState([\n\n       {\n           format:\"trilogy\",\n           restricted:false,\n            balance:\"--\",\n            legal:false\n        },\n        {\n            format:\"standard\",\n            restricted:false,\n            balance:\"--\",\n            legal:false\n        },\n        {\n            format:\"infinite\",\n            restricted:false,\n            balance:\"--\",\n            legal:true\n        }\n    ]);\n    const [load, setLoad]= React.useState(false);\n\n\n    let subtypes;\n    let sides;\n\n    if(props.crd.subtypes!==undefined){\n       subtypes =props.crd.subtypes.map((sb, idx)=>\n           <h3 key={idx}>{sb.name}{idx!==(props.crd.subtypes.length-1)&&\"-\"}</h3>\n       );\n    }\n\n    if(props.crd.sides!==undefined){\n        sides = props.crd.sides.map((sd, idx)=>\n            <div key={idx} className={\"side\"}>{sd}</div>\n        );\n    }\n\n    React.useEffect(()=>{\n\n        const abortController = new AbortController();\n        const signal  =abortController.signal;\n\n\n        function handleStatusChange(status) {\n            setRst(status);\n        }\n\n        const unsubscribe = ()=>{\n\n            fetch(\"https://swdestinydb.com/api/public/formats/\", {signal:signal})\n                .then(response => {\n                    return response.json();\n                })\n                .then((data) => {\n                    let formats=[];\n\n                     data.map((fm)=>{\n\n                        let format ={\n                            name:fm.name,\n                            restricted:false,\n                            balance:\"--\",\n                            legal:false\n                        };\n\n                        if(props.code in fm.data.balance){\n                            format.balance = fm.data.balance[props.code];\n                        }\n\n                        if(fm.data.restricted.includes(props.code)){\n                            format.restricted=true;\n                        }\n\n                        if(fm.data.sets.includes(props.crd.set_code)){\n                            format.legal=true;\n                        }\n\n\n                        formats.push(format);\n\n\n\n                    });\n\n                    handleStatusChange(formats);\n                }).catch(()=> console.log())\n        };\n\n        unsubscribe();\n\n\n        return function cleanup(){\n            unsubscribe();\n            abortController.abort();\n        };\n    },[]);\n\n    let formats = rst.map((fm, idx)=>\n    <div key={idx}>\n        <h1>{fm.name}</h1>\n        <h3>{fm.restricted ? \"Restricted\":null}</h3>\n        <h3>{fm.balance}</h3>\n        <h6>Legal: {fm.legal ? \"Playable\":\"Unplayable\"}</h6>\n    </div>\n    );\n\n\n    return(\n        <div className={\"cardInfo\"}>\n            <h1>{props.crd.is_unique&&\"◆ \"}{props.crd.name}</h1>\n            <h2>{props.crd.health&& \"Health:\"}{props.crd.health}</h2>\n            <h2>{props.crd.cost&& \"Cost:\"}{props.crd.cost}</h2>\n            <h2>{props.crd.points&& \"Points:\"}{props.crd.points}</h2>\n            <h2>{props.crd.type_name}</h2>\n            <div className={\"subtypes\"}>{subtypes}</div>\n            <div className={\"sides\"}>{sides}</div>\n            <h3>{props.crd.has_errata&&\"This card has an errata\"}</h3>\n            {formats}\n            <p>{props.crd.text}</p>\n\n            <i>{props.crd.flavor}</i>\n\n            <div>{props.crd.affiliation_name}</div>\n            <div>{props.crd.rarity_name}</div>\n\n            <div>{props.crd.set_name}: {props.crd.position}</div>\n\n\n        </div>\n    )\n}\n\nexport default CardInfo"]},"metadata":{},"sourceType":"module"}